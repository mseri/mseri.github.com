<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="description" content="Tales of a Fractal Spectrum, ">


        <title>Again on zsh - Tales of a Fractal Spectrum</title>



    <meta property="og:type" content="article" />
    <meta property="og:title" content="Again on zsh" />
    <meta property="og:description" content="I already wrote about the great pleasure of moving to zsh in a previous post, but I feel that I should update you on the progresses. From the last time I moved from Oh-My-Zsh to Prezto, a different dotfiles framework. I've found it much lighter and faster than oh-my-zsh ..." />

        <link rel="shortcut icon" href="/images/gauss_logo.png" />

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
    <link rel="stylesheet" href="/theme/css/style-min.css">
    <!--<link rel="stylesheet" href="/theme/css/pygments.css">-->

</head>
<body itemscope itemtype="http://schema.org/WebPage">
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <header class="header">
                <hgroup>
                        <a id="blog-logo" href=""><img src="/images/gauss_logo.png" alt="Blog Logo" /></a>
                    <h1 itemprop="name" class="blog-title"><a href="">Tales of a Fractal Spectrum</a></h1>
                        <h2 itemprop="description" class="blog-description">Free thoughts of a geeky mathematician</h2>
                </hgroup>
<nav class="nav">
  <ul class="social-list">
<li class="social-item"><a class="subscribe icon-twitter" href="http://www.twitter.com/marcelloseri" target="_blank"></a></li>&nbsp;<li class="social-item"><a class="subscribe icon-facebook" href="http://www.facebook.com/marcello.seri" target="_blank"></a></li>&nbsp;<li class="social-item"><a class="subscribe icon-google-plus" href="http://plus.google.com/+MarcelloSeri" target="_blank" rel="publisher"></a></li>&nbsp;<li class="social-item"><a class="subscribe icon-github" href="http://www.github.com/mseri" target="_blank"></a></li>&nbsp;    <li class="social-item">&nbsp;</li>
    <li class="social-item"><a class="subscribe icon-feed" href="/" target="_blank"></a></li>
</ul>
</nav>
            </header>
            <footer class="footer">
                <section class="copyright">&copy; 2013--2015 <a itemscope="copyrightHolder" href="">Tales of a Fractal Spectrum</a></section>
                <section class="poweredby">Proudly published with Pelican on GitHub Pages.</section> 
                <section class="theme"><a href="https://github.com/mseri/purity" target="_blank">Purity</a> is built with <a href="http://purecss.io" target="_blank">PureCSS</a>.</section>
            </footer>
            
        </div>
        <div class="pure-u-1 container">
            
<main class="content" role="main" id="top-post">
        <div class="back">
            <a href="">&larr;  back to the home page</a>
        </div>

    <article itemscope itemtype="http://schema.org/Article" class="post purity_post">

        <header class="post-header">
            <h2 itemprop="name" class="post-title big">Again on zsh</h2>
            <p class="post-meta">Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Marcello Seri</span></span> the <time itemprop="datePublished" datetime="18 Dec 2013">18 Dec 2013</time> - <span class="post-tagline"> under                                 <a class="post-category" href="/tag/long-life-to-zsh.html">long life to zsh</a>,                                 <a class="post-category" href="/tag/prezto.html">prezto</a>,                                 <a class="post-category" href="/tag/custom-theme.html">custom theme</a>. </span></p>
        </header>

        <section class="post-content">

        <div class="post-share-box">
            <section class="share">
                <h3>Share this post</h3>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=/again-on-zsh/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-twitter" href="http://twitter.com/share?text=Again on zsh&url=/again-on-zsh/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=/again-on-zsh/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
        </div>

        <div itemprop="articleBody">
            <p>I already wrote about the great pleasure of moving to zsh in a previous post, but I feel that I should update you on the progresses.</p>
<p>From the last time I moved from Oh-My-Zsh to <a href="https://github.com/sorin-ionescu/prezto">Prezto</a>, a different <a href="http://dotfiles.github.io"><em>dotfiles framework</em></a>. I've found it much lighter and faster than oh-my-zsh, despite not having the same amount of plugins and themes. </p>
<p>In fact, as far as I understood, prezto was born as a fork of oh-my-zsh and was later completely rewritten to be more zshish and better optimised. </p>
<p>I must say that it cover all the plugins that I need and it feels sensibly faster and nicer on OSX and on the Raspberry Pi.</p>
<p>The setup requires three steps instead of just one but it's worth doing it.</p>
<p>If you already use zsh I suggest you to make a backup copy of your configuration. It's enough to do the following from a terminal:</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> ~
<span class="nv">$ </span>tar czf zshBackup.tar.gz .z* .oh-my-zsh
</pre></div>


<p>(remove <code>.oh-my-zsh</code> from the line if you have not installed it)</p>
<p>Then go to the <a href="https://github.com/sorin-ionescu/prezto">Prezto GitHub page</a> and follow the instructions there. </p>
<p>To avoid too many jumps I am copying them here:</p>
<ol>
<li>
<p>Clean your previous Zsh configuration (<strong>create a Backup copy of the files before proceeding!!!</strong>)</p>
<div class="highlight"><pre>rm -r .z* .oh-my-zsh
</pre></div>


</li>
<li>
<p>Launch Zsh:</p>
<div class="highlight"><pre>zsh
</pre></div>


</li>
<li>
<p>Clone the repository:</p>
<div class="highlight"><pre><span class="s-Atom">git</span> <span class="s-Atom">clone</span> <span class="s-Atom">--recursive</span> <span class="nn">https</span><span class="p">:</span><span class="o">//</span><span class="s-Atom">github</span><span class="p">.</span><span class="s-Atom">com</span><span class="o">/</span><span class="s-Atom">sorin</span><span class="o">-</span><span class="s-Atom">ionescu</span><span class="o">/</span><span class="s-Atom">prezto</span><span class="p">.</span><span class="s-Atom">git</span> <span class="s2">&quot;${ZDOTDIR:-$HOME}/.zprezto&quot;</span>
</pre></div>


</li>
<li>
<p>Create a new Zsh configuration by copying the Zsh configuration files provided:</p>
<div class="highlight"><pre><span class="s-Atom">setopt</span> <span class="nv">EXTENDED_GLOB</span>
<span class="s-Atom">for</span> <span class="s-Atom">rcfile</span> <span class="s-Atom">in</span> <span class="s2">&quot;${ZDOTDIR:-$HOME}&quot;</span><span class="s-Atom">/.zprezto</span><span class="o">/</span><span class="s-Atom">runcoms/^</span><span class="nv">README</span><span class="p">.</span><span class="nf">md</span><span class="p">(.</span><span class="nv">N</span><span class="p">);</span> <span class="s-Atom">do</span>
  <span class="s-Atom">ln</span> <span class="o">-</span><span class="s-Atom">s</span> <span class="s2">&quot;$rcfile&quot;</span> <span class="s2">&quot;${ZDOTDIR:-$HOME}/.${rcfile:t}&quot;</span>
<span class="s-Atom">done</span>
</pre></div>


</li>
<li>
<p>Set Zsh as your default shell (if it is not):</p>
<div class="highlight"><pre>chsh -s /bin/zsh
</pre></div>


</li>
<li>
<p>Open a new Zsh terminal window or tab.</p>
</li>
</ol>
<p>At this point you can happily see your new zsh theme.
Prezto comes with many available plugins, I suggest you to look at the <a href="https://github.com/sorin-ionescu/prezto/tree/master/modules#modules">Modules page on Prezto's GitHub</a> or at the <code>README</code> file in <code>.zprezto/modules</code>.</p>
<p>To enable the modules is enough to open <code>.zpreztorc</code> with your favourite editor and look for a block that looks like:</p>
<div class="highlight"><pre># Set the Prezto modules to load (browse modules).
# The order matters.
zstyle &#39;:prezto:load&#39; pmodule \
  &#39;environment&#39; \
  &#39;terminal&#39; \
  &#39;editor&#39; \
  &#39;history&#39; \
  &#39;directory&#39; \
  &#39;spectrum&#39; \
  &#39;utility&#39; \
  &#39;git&#39; \
  &#39;archive&#39; \
  &#39;homebrew&#39; \
  &#39;osx&#39; \
  &#39;ssh&#39; \
  &#39;completion&#39; \
  &#39;prompt&#39;
</pre></div>


<p>Walking through the file you may enable/disable/setup a lot of behaviours and functionalities, have a look at it.</p>
<p>In particular I wanted back my custom theme... To enable and customise themes is a bit tricky (but not too much).</p>
<p>I mimicked what they did in <a href="https://github.com/skwp/dotfiles">YADR</a> (another very interesting dotfiles repository for zsh, vim, sublime text and iterm) and built mine.</p>
<ol>
<li>
<p>First of all you need to create a new folder</p>
<div class="highlight"><pre><span class="nv">$ </span>mkdir ~/.zsh.prompts
</pre></div>


<p>where you are going to save your theme.</p>
</li>
<li>
<p>Modify the <code>Prompt</code> section of <code>.zpreztorc</code> to look like </p>
<div class="highlight"><pre><span class="err">#</span><span class="x"> Set the prompt theme to load.</span>
<span class="err">#</span><span class="x"> Setting it to &#39;random&#39; loads a random theme.</span>
<span class="err">#</span><span class="x"> Auto set to &#39;off&#39; on dumb terminals.</span>
<span class="err">#</span><span class="x"> zstyle &#39;:prezto:module:prompt&#39; theme &#39;sorin&#39;</span>

<span class="x">autoload promptinit</span>
<span class="x">fpath=(</span><span class="p">$</span><span class="nv">HOME</span><span class="x">/.zsh.prompts </span><span class="p">$</span><span class="nv">fpath</span><span class="x">)</span>
<span class="x">promptinit</span>

<span class="x">zstyle &#39;:prezto:module:prompt&#39; theme &#39;YOURTHEMENAME&#39;</span>
</pre></div>


<p>where <code>YOURTHEMENAME</code> is the name that you have chosen for your theme.</p>
</li>
<li>
<p>Create your theme file in <code>.zsh.prompts</code>. Note that its name must be <code>prompt_YOURTHEMENAME_setup</code>, otherwise it will not be recognised.</p>
</li>
</ol>
<p>I have no real advice on the creation of a theme. I posted <a href="https://gist.github.com/mseri/8026965">my theme on gist</a> if you want to try it or you want to use it as a starting point. It is a slightly modified version of YADR's steeef simplified theme.</p>
<p>You may find the function provided in <a href="https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/spectrum.zsh">oh-my-zsh's spectrum file</a> helpful. For example it is enough to type the following in your Zsh terminal to see all the colours available</p>
<div class="highlight"><pre><span class="x">for code in </span><span class="cp">{</span><span class="m">000.</span><span class="o">.</span><span class="m">255</span><span class="cp">}</span><span class="x">; do</span>
<span class="x">    print -P -- &quot;$code: %F</span><span class="cp">{</span><span class="nv">$code</span><span class="cp">}</span><span class="x">Test%f&quot;</span>
<span class="x">done</span>
</pre></div>


<p>Or, for something similar, have fun and try</p>
<div class="highlight"><pre><span class="x">for code in </span><span class="cp">{</span><span class="m">000.</span><span class="o">.</span><span class="m">255</span><span class="cp">}</span><span class="x">; do</span>
<span class="x">    ((cc = code + 1))</span>
<span class="x">    print -P -- &quot;$BG[$code]$code: Test %</span><span class="cp">{</span><span class="nv">$reset_color</span><span class="o">%</span><span class="cp">}</span><span class="x">&quot;</span>
<span class="x">  done</span>
</pre></div>


<p>Have fun. Thanks to zsh and <a href="http://www.iterm2.com/#/section/home">iTerm2</a> I am happily going back to use <a href="http://www.vim.org">vim</a> but that's another story...</p>
        </div>
        
        </section>




    </article>
    
    <script type="text/javascript">
        document.getElementById( 'top-post' ).scrollIntoView();
    </script>

</main>
            
        </div>
    </div>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']]
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>