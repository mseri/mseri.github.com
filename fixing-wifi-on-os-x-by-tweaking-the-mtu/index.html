<!doctype html>
<html lang="en-us">
  <head>
    <title>Fix WiFi on OS X by tweaking the MTU // A fractal spectrum of tales</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.69.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Marcello Seri" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://www.mseri.me/css/main.min.4e2016cf62779480fbe7ba44c261abc7b3a9744838af7268702179daa31e0716.css" />

    
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-44365202-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fix WiFi on OS X by tweaking the MTU"/>
<meta name="twitter:description" content="After I had installed the first developer beta of Yosemite I started experiencing serious WiFi issues at home, with the connection dropping after few seconds of activity. Only apparent solution was to disable and reenable periodically the wifi until it started working.
The issue was not present whene I was in my office or using public wifi&rsquo;s around. And removing the network setup to have them reset to default didn&rsquo;t help."/>

    <meta property="og:title" content="Fix WiFi on OS X by tweaking the MTU" />
<meta property="og:description" content="After I had installed the first developer beta of Yosemite I started experiencing serious WiFi issues at home, with the connection dropping after few seconds of activity. Only apparent solution was to disable and reenable periodically the wifi until it started working.
The issue was not present whene I was in my office or using public wifi&rsquo;s around. And removing the network setup to have them reset to default didn&rsquo;t help." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.mseri.me/fixing-wifi-on-os-x-by-tweaking-the-mtu/" />
<meta property="article:published_time" content="2014-10-15T23:18:23+00:00" />
<meta property="article:modified_time" content="2014-10-19T14:54:46+00:00" />


    
  </head>
  <body>
    <header class="app-header">
      <a href="https://www.mseri.me"><img class="app-header-avatar" src="/images/gauss_logo.png" alt="Marcello Seri" /></a>
      <h1>A fractal spectrum of tales</h1>
      <p>Free thoughts of a geeky mathematician</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/mseri" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/marcelloseri" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
          <a target="_blank" href="https://academic.mseri.me" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-award">
  <title>award</title>
  <circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Fix WiFi on OS X by tweaking the MTU</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 15, 2014
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://www.mseri.me/tags/tips/">Tips</a><a class="tag" href="https://www.mseri.me/tags/tips/">Tips</a><a class="tag" href="https://www.mseri.me/tags/wifi/">wifi</a><a class="tag" href="https://www.mseri.me/tags/osx/">osx</a><a class="tag" href="https://www.mseri.me/tags/trick/">trick</a><a class="tag" href="https://www.mseri.me/tags/mtu/">MTU</a></div></div>
    </header>
    <div class="post-content">
      <p>After I had installed the first developer beta of Yosemite I started experiencing serious WiFi issues <strong>at home</strong>, with the connection dropping after few seconds of activity. Only apparent solution was to disable and reenable periodically the wifi until it started working.</p>
<p>The issue was not present whene I was in my office or using public wifi&rsquo;s around. And removing the network setup to have them reset to default didn&rsquo;t help.</p>
<p>Few days ago I was looking for an old script in one of my backups when I&rsquo;ve found an old note called <code>Find MTU to fix Lion WiFi</code>. I had completely forgotten about it, as I had forgotten about the problems with Lion&rsquo;s wifi&hellip;</p>
<p>It turned out that the problem was, in fact, related to the <a href="https://en.wikipedia.org/wiki/Maximum_transmission_unit">MTU</a>(Basically the size of the transmitted packets). It was set to be automatic, and it automatically selected the value 1500 (that seemed to be quite standard, or at least correcto for almost all the networks I&rsquo;ve used). Checking it brutally I found out that my home router has a quite lower MTU, and changing it did solve all my problems.</p>
<p>Finding the correct MTU is quite easy. One needs just to open a terminal and <code>ping</code> and external website with appropriately constructed packets. Namely</p>
<pre><code>:::sh
ping -D -s 1500 example.com
</code></pre>
<p>Here <code>-D</code> tells ping that the package cannot be fragmented, in other words if it is too large it will not be sent at all, and <code>-s 1500</code> tells it what must be the size of the packet in bytes. Be careful, 1500 is not really the full size of the packet, <strong>there is an overhead of 28 bytes that you need to add to that number</strong>. E.g <code>-s 1500</code> means that the packet size is 1528 bytes. If the largest packet that you can successfully send has size  1472, then your MTU value is 1500.</p>
<p>You can add the option <code>-c n</code> to tell ping to send only n packages (2 or 3 will be enough), otherwise you can kill the process after a couple of packages is sent.</p>
<p>Running</p>
<pre><code>:::sh
ping -D -s 1500 example.com
</code></pre>
<p>on my network I get the following output</p>
<pre><code>PING example.com (93.184.216.119): 1500 data bytes
  ping: sendto: Message too long
  [...]
</code></pre>
<p>If you read a similar message (and you should if you use 1500) you need to start reducing the value after the <code>-s</code> until you find the first value for which ping starts working, i.e. you start receiving output of the form</p>
<pre><code>1412 bytes from 93.184.216.119: icmp_seq=0 ttl=53 time=136.639 ms
[...] 
</code></pre>
<p>In my case the value was 1404, that corresponds to MTU 1432.</p>
<p>To change the MTU than is enough to open WiFi&rsquo;s advanced preferences and, on the hardware tab, select <em>MTU: Manual</em>, insert the value that you have found and apply the changes.</p>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    this.page.identifier = '36';
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "talesofafractalspectrum" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>
  </body>
</html>
