<!doctype html><html lang=en-us><head><title>Fix Hombrew on OS X Yosemite // A fractal spectrum of tales</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.120.4"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Marcello Seri"><meta name=description content="Free thoughts of a geeky mathematician"><meta http-equiv=Permissions-Policy content="interest-cohort=()"><link rel=stylesheet href=https://www.mseri.me/css/main.min.4e2016cf62779480fbe7ba44c261abc7b3a9744838af7268702179daa31e0716.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Fix Hombrew on OS X Yosemite"><meta name=twitter:description content="If for some reasons you&rsquo;ve been crazy enough to install the first developer beta of Mac OSX 10.01 Yosemite, you&rsquo;ve probably noticed that Homebrew stopped working.
One possible fix is to delete homebrew and reinstall everything but I am too lazy and too attached to my list of installed packages to accept it.
The first error I&rsquo;ve got while running brew update was related to missing system ruby 1.8. This appears because OSX finally updated to ruby 2."><meta property="og:title" content="Fix Hombrew on OS X Yosemite"><meta property="og:description" content="If for some reasons you&rsquo;ve been crazy enough to install the first developer beta of Mac OSX 10.01 Yosemite, you&rsquo;ve probably noticed that Homebrew stopped working.
One possible fix is to delete homebrew and reinstall everything but I am too lazy and too attached to my list of installed packages to accept it.
The first error I&rsquo;ve got while running brew update was related to missing system ruby 1.8. This appears because OSX finally updated to ruby 2."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mseri.me/fix-hombrew-on-os-x-yosemite/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-06-03T15:58:37+00:00"><meta property="article:modified_time" content="2021-11-19T10:40:50+00:00"></head><body><header class=app-header><a href=https://www.mseri.me><img class=app-header-avatar src=/images/gauss_logo.png alt="Marcello Seri"></a><h1>A fractal spectrum of tales</h1><p>Free thoughts of a geeky mathematician</p><div class=app-header-social><a target=_blank href=https://github.com/mseri rel="noreferrer noopener me"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://mathstodon.xyz/@mseri rel="noreferrer noopener me"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mastodon"><title>mastodon</title><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18.648 15.254C16.832 17.017 12 16.88 12 16.88a18.262 18.262.0 01-3.288-.256c1.127 1.985 4.12 2.81 8.982 2.475-1.945 2.013-13.598 5.257-13.668-7.636L4 10.309c0-3.036.023-4.115 1.352-5.633C7.023 2.766 12 3.01 12 3.01s4.977-.243 6.648 1.667C19.977 6.195 20 7.274 20 10.31s-.456 4.074-1.352 4.944z"/><path d="M12 11.204V8.278C12 7.02 11.105 6 10 6S8 7.02 8 8.278V13m4-4.722C12 7.02 12.895 6 14 6s2 1.02 2 2.278V13"/></svg></a><a target=_blank href=https://twitter.com/marcelloseri rel="noreferrer noopener me"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a target=_blank href=https://academic.mseri.me rel="noreferrer noopener me"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-award"><title>award</title><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg></a></div><div style=margin-top:30px><h3 style=margin-bottom:10px>My podcasts</h4><a href=https://podcasters.spotify.com/pod/show/not-just-numbers><img src=/images/njn.jpg alt="Cover of the pocast it's not just numbers" class=image width=105px>
</a>&nbsp;
<a href=https://linktr.ee/degreesoffreedom><img src=/images/dof.jpg alt="Cover of the podcast degrees of freedom" class=image width=105px></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Fix Hombrew on OS X Yosemite</h1><div class=post-meta><div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jun 3, 2014</div><div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div><div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><a class=tag href=https://www.mseri.me/tags/fix/>fix</a><a class=tag href=https://www.mseri.me/tags/homebrew/>homebrew</a><a class=tag href=https://www.mseri.me/tags/yosemite/>yosemite</a></div></div></header><div class=post-content><p>If for some reasons you&rsquo;ve been crazy enough to install the first developer beta of Mac OSX 10.01 Yosemite, you&rsquo;ve probably noticed that <a href=https://brew.sh/>Homebrew</a> stopped working.</p><p>One possible fix is to delete homebrew and reinstall everything but I am too lazy and too attached to my list of installed packages to accept it.</p><p>The first error I&rsquo;ve got while running <code>brew update</code> was related to <em>missing system ruby 1.8</em>. This appears because OSX finally updated to <code>ruby 2.0</code> and this conflicts with the static link saved in one of Hombrew executables.</p><hr><p><strong>Update</strong>: as of this morning Homebrew has been fixed, you will not need to modify Hombrew&rsquo;s files if you update to Yosemite after having run <code>brew update</code>.</p><p>If you did update the files as above and get a <em>failed merge</em> error, you will need to edit them again and fix the merge. On top of each file you will see something like</p><pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:mergetest
Your changes
=======
Something new
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 4e2b407f501b68f8588aa645acafffa0224b9b78:mergetest
</code></pre><p>Delete everything except for the &lsquo;Something new&rsquo; line. Then save and in the end run <code>cd $(brew --repository) && git commit -a -m 'fix brew update'</code></p><hr><p>The fix is quite simple. I opened <code>vim /usr/local/Library/brew.rb</code> and replaced the <code>1.8</code> in the shebang at the beginning of the file with <code>2.0</code>.
And the same must be required for <code>/usr/local/Library/ENV/4.3/xcrun</code>, <code>/usr/local/Library/ENV/4.3/clang</code> and <code>/usr/local/Library/ENV/4.3/cc</code>.</p><p>But that&rsquo;s not enough. We still have to add and commit the changes: <code>cd $(brew --repository) && git commit -a -m 'fix ruby 2'</code></p><p>Running <code>brew update</code> still complains. I needed two additional fixes. First <code>mkdir /Library/Caches/Homebrew</code> and second you will need to install <code>XCode 6 beta</code> (if you have access to Yosemite I assume that you have access to XCode too) and then install the command line tools (you can download them from Apple&rsquo;s developer center).</p><p>You may encounter additional errors. The <a href=https://github.com/Homebrew/homebrew/issues/29795>relative Issue page on Homebrew&rsquo;s git repo</a> seems quite crowded at the moment.</p></div><div class=post-footer></div></article></main></body></html>